(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(e,t,a){"use strict";a.r(t);var s=a(10),n=a(18),i=a(2),r=a(19),c=a(12),o=a(13),l=a(15),u=a(14),d=a(7),m=a.n(d),h=a(20),p=a.n(h),b=(a(28),a(9)),j=(a(32),a(30),a(21));b.a.initializeApp({apiKey:"AIzaSyBblldZeCvHZy5fDfTzxgTWPYoT568KCzQ",authDomain:"rankr-15271.firebaseapp.com",databaseURL:"https://rankr-15271-default-rtdb.firebaseio.com",projectId:"rankr-15271",storageBucket:"rankr-15271.appspot.com",messagingSenderId:"548038535110",appId:"1:548038535110:web:d0855f7184b33be75474c7",measurementId:"G-3WXSLX7RJV"});var f=b.a.firestore().collection("users"),v=null,g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={name:e.user.displayName,email:e.user.email,photoUrl:e.user.photoURL,uid:e.user.uid,loaded:!1,items:[],listName:"",type:""},s.getUserRankings(),s}return Object(o.a)(a,[{key:"toString",value:function(){return"Name: "+this.state.name}},{key:"getUserRankings",value:function(){var e=this;f.doc(this.state.email).collection("rankings").doc("taylor").get().then((function(t){if(t.exists){var a=t.data();console.log(e.toString()),e.setState({items:a.items,loaded:!0,listName:a.displayName,type:a.type}),console.log(a.displayName)}else console.log("Got Here"),f.doc(e.state.email).set({name:e.state.name}).then(alert("New Account Made!")),f.doc(e.state.email).collection("rankings").doc("taylor").set({displayName:"Taylor Swift",items:prompt("Enter your top 3 taylor Swift separated by a comma followed by a space: e.g. Style, Clean").split(", "),type:"music"}),e.getUserRankings()})).catch((function(e){console.log("Error getting document:",e)}))}},{key:"render",value:function(){var e=this.state.items;return this.state.loaded?Object(i.jsx)(O,{items:e,listName:this.state.listName,userEmail:this.state.email,type:this.state.type}):Object(i.jsx)("p",{children:"Loading Element..."})}}]),a}(m.a.Component),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={items:e.items,userEmail:e.userEmail,draggingOn:!1},s}return Object(o.a)(a,[{key:"handleAdd",value:function(){var e=this.state.items,t=prompt("What item would you like to add?");""!==t&&null!==t&&(e.push(t),this.setState({items:e,draggingOn:!1}))}},{key:"handleSave",value:function(){f.doc(this.state.userEmail).collection("rankings").doc("taylor").set({displayName:this.props.listName,items:this.state.items,type:this.props.type}).then(alert("Saved!"))}},{key:"render",value:function(){var e,t=this,a=[],s=this.state.items,c=Object(r.a)(s.entries());try{for(c.s();!(e=c.n()).done;){var o=Object(n.a)(e.value,2),l=o[0],u=o[1];a.push(Object(i.jsx)(y,{index:l,item:u,list:this},"item"+l))}}catch(d){c.e(d)}finally{c.f()}return Object(i.jsxs)("div",{children:[Object(i.jsx)("h4",{children:this.props.listName}),Object(i.jsx)("ol",{className:"list",children:a}),Object(i.jsx)("button",{id:"add",className:"btn btn-primary",onClick:function(){return t.handleAdd()},children:"Add Item"}),Object(i.jsx)("button",{id:"save",className:"btn btn-warning",onClick:function(){return t.handleSave()},children:"Save List"})]})}}]),a}(m.a.Component),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={value:"",itemNum:e.index,key:"item"+e.index},n.handleChange=n.handleChange.bind(Object(s.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(s.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){var t=e.target.value,a=parseInt(t,10);isNaN(a)&&""!==t||(""===t?this.setState({value:t}):this.setState({value:a}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),function(e,t,a){var s=e.state.items;a>=s.length&&(a=s.length);a-=1;var n=s[t];s.splice(t,1),s.splice(a,0,n),e.state.items=s}(this.props.list,this.state.itemNum,this.state.value),this.setState({value:""}),this.props.list.forceUpdate()}},{key:"handleRemove",value:function(e){var t=this.props.list;console.log(e),console.log(t.state.items),t.state.items.splice(e,1),t.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props.list;var a=document.querySelectorAll(".item");return Object(i.jsx)("li",{className:"item",id:this.state.itemNum,draggable:"true",onDragStart:function(e){e.target.style.opacity="0.4",v=e.target.id,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.innerHTML)},onDragLeave:function(e){e.target.classList.remove("over")},onDragOver:function(e){return e.preventDefault&&e.preventDefault(),e.target.style.opacity=".",e.dataTransfer.dropEffect="move",!1},onDragEnter:function(e){e.target.classList.add("over")},onDragEnd:function(e){e.target.style.opacity="1",a.forEach((function(e){e.classList.remove("over")}))},onDrop:function(e){if(e.stopPropagation&&e.stopPropagation(),v!==e.target.id){var a=t.state.items.splice(v,1)[0];t.state.items.splice(e.target.id,0,a),t.forceUpdate()}return!1},children:Object(i.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(i.jsx)("label",{children:Object(i.jsx)("input",{type:"text",className:"form-control",value:this.state.value,onChange:this.handleChange})}),Object(i.jsx)("label",{id:"name",children:Object(i.jsxs)("span",{className:"item-name",id:this.state.itemNum,children:["\xa0\xa0",this.props.item,"\xa0\xa0"]})}),Object(i.jsx)("input",{type:"submit",className:"btn btn-info",value:"Submit"}),Object(i.jsx)("input",{type:"button",className:"btn btn-success",onClick:function(){return e.handleRemove(e.state.itemNum)},value:"Remove Item"})]})},this.state.key)}}]),a}(m.a.Component);var x=b.a.auth();function N(){var e=Object(j.a)(x),t=Object(n.a)(e,1)[0];return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("div",{className:"row",id:"user-info-rankings",children:[Object(i.jsx)("section",{id:"user-info",className:"col-md-2",children:t?Object(i.jsx)(C,{}):null}),Object(i.jsx)("section",{id:"rankings",className:"col-md-10",children:t?Object(i.jsx)(g,{user:x.currentUser}):Object(i.jsx)(k,{})})]}),Object(i.jsx)("section",{id:"action-buttons",children:t?Object(i.jsx)(S,{}):Object(i.jsx)("p",{})})]})}function k(){return Object(i.jsx)("button",{className:"btn btn-primary",onClick:function(){var e=new b.a.auth.GoogleAuthProvider;b.a.auth().signInWithPopup(e)},children:"Sign in with Google"})}function S(){return x.currentUser&&Object(i.jsx)("button",{className:"btn btn-danger",onClick:function(){return x.signOut()},children:"Sign Out"})}function C(){var e=x.currentUser,t=e.displayName,a=e.photoURL,s=t.split(" ")[0];return Object(i.jsxs)("div",{id:"user-info",children:[Object(i.jsx)("img",{src:a,alt:"Profile"}),Object(i.jsx)("br",{}),Object(i.jsxs)("p",{className:"user-info",children:["Name: ",s]}),Object(i.jsx)("p",{className:"user-info",children:"Number of Rankings: 1"})]})}p.a.render(Object(i.jsx)(N,{}),document.getElementById("root"))},28:function(e,t,a){}},[[22,1,2]]]);
//# sourceMappingURL=main.7b103222.chunk.js.map